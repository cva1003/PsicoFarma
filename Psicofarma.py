diccionario_combinado = {
    "CYP2D6": {
        "Venlafaxina": {
            "*1/*1xN": "no existe recomendación, no hay evidencias",
            "*1/*2xN": "no existe recomendación, no hay evidencias",
            "*1/*10": "Tratamiento con dosis normal",
            "*1/*9": "Tratamiento con dosis normal",
            "*1/*41": "Tratamiento con dosis normal",
            "*1/*17": "Tratamiento con dosis normal",
            "*1/*29": "Tratamiento con dosis normal",
            "*1/*10x3": "Tratamiento con dosis normal",
            "*2x2/*10": "Tratamiento con dosis normal",
            "*4/*10": "no existe recomendación, no hay evidencias",
            "*4/*41": "no existe recomendación, no hay evidencias",
            "*10/*10": "no existe recomendación, no hay evidencias",
            "*10/*41": "no existe recomendación, no hay evidencias",
            "*10/*29": "no existe recomendación, no hay evidencias",
            "*9/*14": "no existe recomendación, no hay evidencias",
            "*17/*41": "no existe recomendación, no hay evidencias",
            "*1/*5": "no existe recomendación, no hay evidencias",
            "*1/*4": "no existe recomendación, no hay evidencias",
            "*1/*5": "no existe recomendación, no hay evidencias",
            "*3/*4": "Considerar tratamiento que no sea metabolizado CYP2D6",
            "*4/*4": "Considerar tratamiento que no sea metabolizado CYP2D6",
            "*5/*5": "Considerar tratamiento que no sea metabolizado CYP2D6",
            "*5/*6": "Considerar tratamiento que no sea metabolizado CYP2D6",
            "*1/*22": "No recomendaciones",
            "*1/*25": "No recomendaciones",
            "*22/*25": "No recomendaciones"
        },
        "Aripiprazol": {
            "*1/*3xN": "Sin recomendaciones",
            "*2/*3xN": "Sin recomendaciones",
            "*1/*2": "Sin recomendaciones",
            "*2/*2": "Sin recomendaciones",
            "*35/*2": "Sin recomendaciones",
            "*1": "Sin recomendaciones",
            "*2": "Sin recomendaciones",
            "*9/*2": "Sin recomendaciones",
            "*17/*2": "Sin recomendaciones",
            "*29/*2": "Sin recomendaciones",
            "*33": "Sin recomendaciones",
            "*35": "Sin recomendaciones",
            "*39": "Sin recomendaciones",
            "*41/*2": "Sin recomendaciones",
            "*9": "70% de la dosis máxima",
            "*10/*2": "70% de la dosis máxima",
            "*14": "70% de la dosis máxima",
            "*17": "70% de la dosis máxima",
            "*29": "70% de la dosis máxima",
            "*41": "70% de la dosis máxima",
            "*10": "70% de la dosis máxima",
            "*3": "Sin recomendación",
            "*3/*2": "Sin recomendación",
            "*4": "Sin recomendación",
            "*4/*2": "Sin recomendación",
            "*5": "Sin recomendación",
            "*6": "Sin recomendación",
            "*6/*2": "Sin recomendación",
            "*7": "Sin recomendación",
            "*8": "Sin recomendación",
            "*11": "Sin recomendación",
            "*12": "Sin recomendación",
            "*13": "Sin recomendación",
            "*15": "Sin recomendación",
            "*18": "Sin recomendación",
            "*19": "Sin recomendación",
            "*20": "Sin recomendación",
            "*21": "Sin recomendación",
            "*31": "Sin recomendación",
            "*36": "Sin recomendación",
            "*36/*2": "Sin recomendación",
            "*38": "Sin recomendación",
            "*40": "Sin recomendación",
            "*42": "Sin recomendación",
            "*114": "Sin recomendación"
        },
        "Haloperidol": {
            "*1/*3xN": "Utilizar la dosis normal x1.5 o buscar otro medicamento que no esté sintetizado por CYP2D6",
            "*2/*3xN": "Utilizar la dosis normal x1.5 o buscar otro medicamento que no esté sintetizado por CYP2D6",
            "*1/*2": "Utilizar la dosis normal x1.5 o buscar otro medicamento que no esté sintetizado por CYP2D6",
            "*2/*2": "Utilizar la dosis normal x1.5 o buscar otro medicamento que no esté sintetizado por CYP2D6",
            "*35/*2": "Utilizar la dosis normal x1.5 o buscar otro medicamento que no esté sintetizado por CYP2D6",
            "*1": "Sin recomendaciones",
            "*2": "Sin recomendaciones",
            "*9/*2": "Sin recomendaciones",
            "*17/*2": "Sin recomendaciones",
            "*29/*2": "Sin recomendaciones",
            "*33": "Sin recomendaciones",
            "*35": "Sin recomendaciones",
            "*39": "Sin recomendaciones",
            "*41/*2": "Sin recomendaciones",
            "*9": "60% de la dosis normal",
            "*10/*2": "60% de la dosis normal",
            "*14": "60% de la dosis normal",
            "*17": "60% de la dosis normal",
            "*29": "60% de la dosis normal",
            "*41": "60% de la dosis normal",
            "*10": "60% de la dosis normal",
            "*3": "Sin recomendación",
            "*3/*2": "Sin recomendación",
            "*4": "Sin recomendación",
            "*4/*2": "Sin recomendación",
            "*5": "Sin recomendación",
            "*6": "Sin recomendación",
            "*6/*2": "Sin recomendación",
            "*7": "Sin recomendación",
            "*8": "Sin recomendación",
            "*11": "Sin recomendación",
            "*12": "Sin recomendación",
            "*13": "Sin recomendación",
            "*15": "Sin recomendación",
            "*18": "Sin recomendación",
            "*19": "Sin recomendación",
            "*20": "Sin recomendación",
            "*21": "Sin recomendación",
            "*31": "Sin recomendación",
            "*36": "Sin recomendación",
            "*36/*2": "Sin recomendación",
            "*38": "Sin recomendación",
            "*40": "Sin recomendación",
            "*42": "Sin recomendación",
            "*114": "Sin recomendación"
        },
        "Risperidona": {
            "*1/*3xN": "Ajustar dosis según edad y peso\n(Oral: 12 mg/día para adultos y niños mayores de 15 años con un peso de al menos 51 kg o 6 mg/día para niños mayores de 15 años con un peso menor a 51 kg.\nIntramuscular: 75 mg cada 2 semanas.)",
            "*2/*3xN": "Ajustar dosis según edad y peso\n(Oral: 12 mg/día para adultos y niños mayores de 15 años con un peso de al menos 51 kg o 6 mg/día para niños mayores de 15 años con un peso menor a 51 kg.\nIntramuscular: 75 mg cada 2 semanas.)",
            "*1/*2": "Ajustar dosis según edad y peso\n(Oral: 12 mg/día para adultos y niños mayores de 15 años con un peso de al menos 51 kg o 6 mg/día para niños mayores de 15 años con un peso menor a 51 kg.\nIntramuscular: 75 mg cada 2 semanas.)",
            "*2/*2": "Ajustar dosis según edad y peso\n(Oral: 12 mg/día para adultos y niños mayores de 15 años con un peso de al menos 51 kg o 6 mg/día para niños mayores de 15 años con un peso menor a 51 kg.\nIntramuscular: 75 mg cada 2 semanas.)",
            "*35/*2": "Ajustar dosis según edad y peso\n(Oral: 12 mg/día para adultos y niños mayores de 15 años con un peso de al menos 51 kg o 6 mg/día para niños mayores de 15 años con un peso menor a 51 kg.\nIntramuscular: 75 mg cada 2 semanas.)",
            "*1": "Sin recomendaciones",
            "*2": "Sin recomendaciones",
            "*9/*2": "Sin recomendaciones",
            "*17/*2": "Sin recomendaciones",
            "*29/*2": "Sin recomendaciones",
            "*33": "Sin recomendaciones",
            "*35": "Sin recomendaciones",
            "*39": "Sin recomendaciones",
            "*41/*2": "Sin recomendaciones",
            "*9": "67% de la dosis normal. Si presenta efectos secundarios, reducir al 50% de la dosis normal.",
            "*10/*2": "67% de la dosis normal. Si presenta efectos secundarios, reducir al 50% de la dosis normal.",
            "*14": "67% de la dosis normal. Si presenta efectos secundarios, reducir al 50% de la dosis normal.",
            "*17": "67% de la dosis normal. Si presenta efectos secundarios, reducir al 50% de la dosis normal.",
            "*29": "67% de la dosis normal. Si presenta efectos secundarios, reducir al 50% de la dosis normal.",
            "*41": "67% de la dosis normal. Si presenta efectos secundarios, reducir al 50% de la dosis normal.",
            "*10": "67% de la dosis normal. Si presenta efectos secundarios, reducir al 50% de la dosis normal.",
            "*3": "Sin recomendación",
            "*3/*2": "Sin recomendación",
            "*4": "Sin recomendación",
            "*4/*2": "Sin recomendación",
            "*5": "Sin recomendación",
            "*6": "Sin recomendación",
            "*6/*2": "Sin recomendación",
            "*7": "Sin recomendación",
            "*8": "Sin recomendación",
            "*11": "Sin recomendación",
            "*12": "Sin recomendación",
            "*13": "Sin recomendación",
            "*15": "Sin recomendación",
            "*18": "Sin recomendación",
            "*19": "Sin recomendación",
            "*20": "Sin recomendación",
            "*21": "Sin recomendación",
            "*31": "Sin recomendación",
            "*36": "Sin recomendación",
            "*36/*2": "Sin recomendación",
            "*38": "Sin recomendación",
            "*40": "Sin recomendación",
            "*42": "Sin recomendación",
            "*114": "Sin recomendación"
        }
    },
    "CYP2C19": {
        "Medicamentos": ["Citalopram", "Escitalopram", "Sertralina", "Venlafaxina"],
        "Tabla": {
            "*17/*17": "Cambio de antidepresivo por uno no metabolizado por CYP2C19. Si citalopram o escitalopram son clínicamente apropiados y no se logra eficacia, aumentar dosis",
            "*1/*17": "Tratamiento inicial normal, si el paciente no obtiene respuesta necesaria aumentar dosis o cambiar por un antidepresivo alterativo no metabolizado por CYP2C19.",
            "*1/*1": "Tratamiento con dosis normal",
            "*1/*9": "Tratamiento con dosis inicial recomendada. Considerar programa de valoración más lento o una dosis de mantenimiento más baja que los metabolizadores normales. ** Tener cuidado con otros medicamentos ejm: renales e hígado",
            "*9/*17": "Tratamiento con dosis inicial recomendada. Considerar programa de valoración más lento o una dosis de mantenimiento más baja que los metabolizadores normales. ** Tener cuidado con otros medicamentos ejm: renales e hígado",
            "*9/*9": "Tratamiento con dosis inicial recomendada. Considerar programa de valoración más lento o una dosis de mantenimiento más baja que los metabolizadores normales. ** Tener cuidado con otros medicamentos ejm: renales e hígado",
            "*1/*2": "Tratamiento con dosis inicial recomendada. Considerar programa de valoración más lento o una dosis de mantenimiento más baja que los metabolizadores normales ** Tener cuidado con otros medicamentos ejm: renales e hígado",
            "*1/*3": "Tratamiento con dosis inicial recomendada. Considerar programa de valoración más lento o una dosis de mantenimiento más baja que los metabolizadores normales ** Tener cuidado con otros medicamentos ejm: renales e hígado",
            "*2/*17": "Tratamiento con dosis inicial recomendada. Considerar programa de valoración más lento o una dosis de mantenimiento más baja que los metabolizadores normales ** Tener cuidado con otros medicamentos ejm: renales e hígado",
            "*3/*17": "Tratamiento con dosis inicial recomendada. Considerar programa de valoración más lento o una dosis de mantenimiento más baja que los metabolizadores normales ** Tener cuidado con otros medicamentos ejm: renales e hígado",
            "*2/*9": "Cambio de antidepresivo por uno no metabolizado por CYP2C19. Reducción al 50% de la dosis. ** dosis de citalopram 20mg/day máxima",
            "*3/*9": "Cambio de antidepresivo por uno no metabolizado por CYP2C19. Reducción al 50% de la dosis. ** dosis de citalopram 20mg/day máxima",
            "*2/*2": "Cambio de antidepresivo por uno no metabolizado por CYP2C19. Reducción al 50% de la dosis. ** dosis de citalopram 20mg/day máxima",
            "*3/*3": "Cambio de antidepresivo por uno no metabolizado por CYP2C19. Reducción al 50% de la dosis. ** dosis de citalopram 20mg/day máxima",
            "*2/*3": "Cambio de antidepresivo por uno no metabolizado por CYP2C19. Reducción al 50% de la dosis. ** dosis de citalopram 20mg/day máxima",
            "*1/*12": "No recomendaciones",
            "*2/*12": "No recomendaciones",
            "*12/*14": "No recomendaciones"
        }
        
    }
}
def obtener_informacion_medica(diccionario_combinado):
    from datetime import datetime
    from unidecode import unidecode
    
    # Función para comprobar y normalizar respuestas con "sí" o "no"
    def obtener_respuesta(pregunta):
        while True:
            respuesta = input(pregunta)
            respuesta_normalizada = unidecode(respuesta.lower())  # Eliminar tildes y pasar a minúsculas
            if respuesta_normalizada == "si" or respuesta_normalizada == "no":
                return respuesta_normalizada
            else:
                print("Respuesta inválida. Por favor, responde con 'Sí' o 'No'.")
    
    # Función para ingresar una lista de elementos (genes, medicamentos, tipos de alelos)
    def ingresar_lista(pregunta):
        lista = []
        while True:
            item = input(pregunta)
            if item.lower() == "fin":
                break  # Termina el bucle si el usuario escribe "fin"
            lista.append(item)  # Agrega el ítem a la lista
        return lista
    
    # Introducir nombre y apellidos
    nom_ap = input("Introduce nombre y apellidos: ")
    print(f"\nEl nombre ingresado es: {nom_ap}")
    
    # Solicitar la edad
    while True:
        try:
            edad = int(input("Por favor, introduce tu edad: "))
            if edad >= 0:
                print(f"La edad ingresada es: {edad}")
                break  # Si es válida, salimos del bucle
            else:
                print("Por favor, introduce una edad válida (un número entero positivo).")
        except ValueError:
            print("Entrada no válida. Asegúrate de introducir un número entero.")
    
    # Solicitar el sexo e ingresar un valor válido
    while True:
        sexo = input("Introduce tu sexo (Hombre/Mujer): ").capitalize()  # Capitaliza la primera letra para evitar errores de mayúsculas/minúsculas
        if sexo in ["Hombre", "Mujer"]:
            print(f"El sexo ingresado es: {sexo}")
            break  # Si el sexo es válido, salir del bucle
        else:
            print("Por favor, introduce 'Hombre' o 'Mujer' como respuesta válida.")
    
    # Realizar preguntas sobre estilo de vida
    ejercicio = obtener_respuesta("¿Realizas ejercicio regularmente? (Sí/No): ")
    alcohol = obtener_respuesta("¿Consumes alcohol regularmente? (Sí/No): ")
    tabaco = obtener_respuesta("¿Fumas o has fumado alguna vez? (Sí/No): ")
    
    # Validar la fecha de nacimiento
    while True:
        fecha = input("Introduce tu fecha de nacimiento (dd/mm/yyyy): ")
        try:
            fecha_valida = datetime.strptime(fecha, "%d/%m/%Y")
            print(f"La fecha ingresada es: {fecha_valida.strftime('%d/%m/%Y')}")
            break  # Si la fecha es válida, salimos del bucle
        except ValueError:
            print("Fecha no válida. Por favor, introduce una fecha en el formato correcto (dd/mm/yyyy).")
    
    # Historial médico
    historial_medico = obtener_respuesta("¿Tienes alguna enfermedad preexistente? (Sí/No): ")
    if historial_medico == "si":
        enfermedades = []  # Lista para almacenar las enfermedades
        while True:
            enfermedad = input("Por favor, indica una enfermedad (o escribe 'fin' para terminar): ")
            if enfermedad.lower() == "fin":
                break  # Termina el bucle si el usuario escribe "fin"
            else:
                enfermedades.append(enfermedad)  # Agrega la enfermedad a la lista
        print("Enfermedades indicadas: ", ", ".join(enfermedades))  # Muestra la lista de enfermedades
    else:
        print("No se reportan enfermedades preexistentes.")
    
    # Ingresar genes, medicamentos y tipos de alelos
    print("\nAhora vamos a ingresar los genes, medicamentos y tipos de alelos.")
    genes = ingresar_lista("Introduce un gen (o escribe 'fin' para terminar): ")
    medicamentos = ingresar_lista("Introduce un medicamento (o escribe 'fin' para terminar): ")
    tipos_de_alelo = ingresar_lista("Introduce un tipo de alelo (o escribe 'fin' para terminar): ")
    
    # Mostrar las listas ingresadas
    print("\nGenes ingresados:", genes)
    print("Medicamentos ingresados:", medicamentos)
    print("Tipos de alelo ingresados:", tipos_de_alelo)

    # Separación visual entre la entrada y la búsqueda
    print("\n=====================================")
    print("Ahora se mostrarán los resultados de la búsqueda en el diccionario:\n")
    
    # Iterar sobre los genes, medicamentos y alelos
    for gen in genes:
        for medicamento in medicamentos:
            for tipo_de_alelo in tipos_de_alelo:
                # Comprobar si el gen existe en el diccionario
                if gen in diccionario_combinado:
                    # Comprobar si el medicamento existe para el gen
                    if medicamento in diccionario_combinado[gen]:
                        # Obtener el tratamiento para el alelo, si existe
                        tratamiento = diccionario_combinado[gen].get(medicamento, {}).get(tipo_de_alelo, "Alelo no encontrado para este medicamento")
                        print(f"Tratamiento para {medicamento} y alelo {tipo_de_alelo} en gen {gen}: {tratamiento}")
                    else:
                        print(f"El medicamento {medicamento} no está listado para el gen {gen}.")
                else:
                    print(f"El gen {gen} no está en el diccionario.")

# Llamar a la función pasando el diccionario combinado
obtener_informacion_medica(diccionario_combinado)
