diccionario_combinado = {
    "CYP2D6": {
        "Venlafaxina": {
            "*1/*1xN": "no existe recomendación, no hay evidencias",
            "*1/*2xN": "no existe recomendación, no hay evidencias",
            "*1/*10": "Tratamiento con dosis normal",
            "*1/*9": "Tratamiento con dosis normal",
            "*1/*41": "Tratamiento con dosis normal",
            "*1/*17": "Tratamiento con dosis normal",
            "*1/*29": "Tratamiento con dosis normal",
            "*1/*10x3": "Tratamiento con dosis normal",
            "*2x2/*10": "Tratamiento con dosis normal",
            "*4/*10": "no existe recomendación, no hay evidencias",
            "*4/*41": "no existe recomendación, no hay evidencias",
            "*10/*10": "no existe recomendación, no hay evidencias",
            "*10/*41": "no existe recomendación, no hay evidencias",
            "*10/*29": "no existe recomendación, no hay evidencias",
            "*9/*14": "no existe recomendación, no hay evidencias",
            "*17/*41": "no existe recomendación, no hay evidencias",
            "*1/*5": "no existe recomendación, no hay evidencias",
            "*1/*4": "no existe recomendación, no hay evidencias",
            "*1/*5": "no existe recomendación, no hay evidencias",
            "*3/*4": "Considerar tratamiento que no sea metabolizado CYP2D6",
            "*4/*4": "Considerar tratamiento que no sea metabolizado CYP2D6",
            "*5/*5": "Considerar tratamiento que no sea metabolizado CYP2D6",
            "*5/*6": "Considerar tratamiento que no sea metabolizado CYP2D6",
            "*1/*22": "No recomendaciones",
            "*1/*25": "No recomendaciones",
            "*22/*25": "No recomendaciones"
        },
        "Aripiprazol": {
            "*1/*3xN": "Sin recomendaciones",
            "*2/*3xN": "Sin recomendaciones",
            "*1/*2": "Sin recomendaciones",
            "*2/*2": "Sin recomendaciones",
            "*35/*2": "Sin recomendaciones",
            "*1": "Sin recomendaciones",
            "*2": "Sin recomendaciones",
            "*9/*2": "Sin recomendaciones",
            "*17/*2": "Sin recomendaciones",
            "*29/*2": "Sin recomendaciones",
            "*33": "Sin recomendaciones",
            "*35": "Sin recomendaciones",
            "*39": "Sin recomendaciones",
            "*41/*2": "Sin recomendaciones",
            "*9": "70% de la dosis máxima",
            "*10/*2": "70% de la dosis máxima",
            "*14": "70% de la dosis máxima",
            "*17": "70% de la dosis máxima",
            "*29": "70% de la dosis máxima",
            "*41": "70% de la dosis máxima",
            "*10": "70% de la dosis máxima",
            "*3": "Sin recomendación",
            "*3/*2": "Sin recomendación",
            "*4": "Sin recomendación",
            "*4/*2": "Sin recomendación",
            "*5": "Sin recomendación",
            "*6": "Sin recomendación",
            "*6/*2": "Sin recomendación",
            "*7": "Sin recomendación",
            "*8": "Sin recomendación",
            "*11": "Sin recomendación",
            "*12": "Sin recomendación",
            "*13": "Sin recomendación",
            "*15": "Sin recomendación",
            "*18": "Sin recomendación",
            "*19": "Sin recomendación",
            "*20": "Sin recomendación",
            "*21": "Sin recomendación",
            "*31": "Sin recomendación",
            "*36": "Sin recomendación",
            "*36/*2": "Sin recomendación",
            "*38": "Sin recomendación",
            "*40": "Sin recomendación",
            "*42": "Sin recomendación",
            "*114": "Sin recomendación"
        },
        "Haloperidol": {
            "*1/*3xN": "Utilizar la dosis normal x1.5 o buscar otro medicamento que no esté sintetizado por CYP2D6",
            "*2/*3xN": "Utilizar la dosis normal x1.5 o buscar otro medicamento que no esté sintetizado por CYP2D6",
            "*1/*2": "Utilizar la dosis normal x1.5 o buscar otro medicamento que no esté sintetizado por CYP2D6",
            "*2/*2": "Utilizar la dosis normal x1.5 o buscar otro medicamento que no esté sintetizado por CYP2D6",
            "*35/*2": "Utilizar la dosis normal x1.5 o buscar otro medicamento que no esté sintetizado por CYP2D6",
            "*1": "Sin recomendaciones",
            "*2": "Sin recomendaciones",
            "*9/*2": "Sin recomendaciones",
            "*17/*2": "Sin recomendaciones",
            "*29/*2": "Sin recomendaciones",
            "*33": "Sin recomendaciones",
            "*35": "Sin recomendaciones",
            "*39": "Sin recomendaciones",
            "*41/*2": "Sin recomendaciones",
            "*9": "60% de la dosis normal",
            "*10/*2": "60% de la dosis normal",
            "*14": "60% de la dosis normal",
            "*17": "60% de la dosis normal",
            "*29": "60% de la dosis normal",
            "*41": "60% de la dosis normal",
            "*10": "60% de la dosis normal",
            "*3": "Sin recomendación",
            "*3/*2": "Sin recomendación",
            "*4": "Sin recomendación",
            "*4/*2": "Sin recomendación",
            "*5": "Sin recomendación",
            "*6": "Sin recomendación",
            "*6/*2": "Sin recomendación",
            "*7": "Sin recomendación",
            "*8": "Sin recomendación",
            "*11": "Sin recomendación",
            "*12": "Sin recomendación",
            "*13": "Sin recomendación",
            "*15": "Sin recomendación",
            "*18": "Sin recomendación",
            "*19": "Sin recomendación",
            "*20": "Sin recomendación",
            "*21": "Sin recomendación",
            "*31": "Sin recomendación",
            "*36": "Sin recomendación",
            "*36/*2": "Sin recomendación",
            "*38": "Sin recomendación",
            "*40": "Sin recomendación",
            "*42": "Sin recomendación",
            "*114": "Sin recomendación"
        },
        "Risperidona": {
            "*1/*3xN": "Ajustar dosis según edad y peso\n(Oral: 12 mg/día para adultos y niños mayores de 15 años con un peso de al menos 51 kg o 6 mg/día para niños mayores de 15 años con un peso menor a 51 kg.\nIntramuscular: 75 mg cada 2 semanas.)",
            "*2/*3xN": "Ajustar dosis según edad y peso\n(Oral: 12 mg/día para adultos y niños mayores de 15 años con un peso de al menos 51 kg o 6 mg/día para niños mayores de 15 años con un peso menor a 51 kg.\nIntramuscular: 75 mg cada 2 semanas.)",
            "*1/*2": "Ajustar dosis según edad y peso\n(Oral: 12 mg/día para adultos y niños mayores de 15 años con un peso de al menos 51 kg o 6 mg/día para niños mayores de 15 años con un peso menor a 51 kg.\nIntramuscular: 75 mg cada 2 semanas.)",
            "*2/*2": "Ajustar dosis según edad y peso\n(Oral: 12 mg/día para adultos y niños mayores de 15 años con un peso de al menos 51 kg o 6 mg/día para niños mayores de 15 años con un peso menor a 51 kg.\nIntramuscular: 75 mg cada 2 semanas.)",
            "*35/*2": "Ajustar dosis según edad y peso\n(Oral: 12 mg/día para adultos y niños mayores de 15 años con un peso de al menos 51 kg o 6 mg/día para niños mayores de 15 años con un peso menor a 51 kg.\nIntramuscular: 75 mg cada 2 semanas.)",
            "*1": "Sin recomendaciones",
            "*2": "Sin recomendaciones",
            "*9/*2": "Sin recomendaciones",
            "*17/*2": "Sin recomendaciones",
            "*29/*2": "Sin recomendaciones",
            "*33": "Sin recomendaciones",
            "*35": "Sin recomendaciones",
            "*39": "Sin recomendaciones",
            "*41/*2": "Sin recomendaciones",
            "*9": "67% de la dosis normal. Si presenta efectos secundarios, reducir al 50% de la dosis normal.",
            "*10/*2": "67% de la dosis normal. Si presenta efectos secundarios, reducir al 50% de la dosis normal.",
            "*14": "67% de la dosis normal. Si presenta efectos secundarios, reducir al 50% de la dosis normal.",
            "*17": "67% de la dosis normal. Si presenta efectos secundarios, reducir al 50% de la dosis normal.",
            "*29": "67% de la dosis normal. Si presenta efectos secundarios, reducir al 50% de la dosis normal.",
            "*41": "67% de la dosis normal. Si presenta efectos secundarios, reducir al 50% de la dosis normal.",
            "*10": "67% de la dosis normal. Si presenta efectos secundarios, reducir al 50% de la dosis normal.",
            "*3": "Sin recomendación",
            "*3/*2": "Sin recomendación",
            "*4": "Sin recomendación",
            "*4/*2": "Sin recomendación",
            "*5": "Sin recomendación",
            "*6": "Sin recomendación",
            "*6/*2": "Sin recomendación",
            "*7": "Sin recomendación",
            "*8": "Sin recomendación",
            "*11": "Sin recomendación",
            "*12": "Sin recomendación",
            "*13": "Sin recomendación",
            "*15": "Sin recomendación",
            "*18": "Sin recomendación",
            "*19": "Sin recomendación",
            "*20": "Sin recomendación",
            "*21": "Sin recomendación",
            "*31": "Sin recomendación",
            "*36": "Sin recomendación",
            "*36/*2": "Sin recomendación",
            "*38": "Sin recomendación",
            "*40": "Sin recomendación",
            "*42": "Sin recomendación",
            "*114": "Sin recomendación"
        }
    },
    "CYP2C19": {
        "Medicamentos": ["Citalopram", "Escitalopram", "Sertralina", "Venlafaxina"],
        "Tabla": {
            "*17/*17": "Cambio de antidepresivo por uno no metabolizado por CYP2C19. Si citalopram o escitalopram son clínicamente apropiados y no se logra eficacia, aumentar dosis",
            "*1/*17": "Tratamiento inicial normal, si el paciente no obtiene respuesta necesaria aumentar dosis o cambiar por un antidepresivo alterativo no metabolizado por CYP2C19.",
            "*1/*1": "Tratamiento con dosis normal",
            "*1/*9": "Tratamiento con dosis inicial recomendada. Considerar programa de valoración más lento o una dosis de mantenimiento más baja que los metabolizadores normales. ** Tener cuidado con otros medicamentos ejm: renales e hígado",
            "*9/*17": "Tratamiento con dosis inicial recomendada. Considerar programa de valoración más lento o una dosis de mantenimiento más baja que los metabolizadores normales. ** Tener cuidado con otros medicamentos ejm: renales e hígado",
            "*9/*9": "Tratamiento con dosis inicial recomendada. Considerar programa de valoración más lento o una dosis de mantenimiento más baja que los metabolizadores normales. ** Tener cuidado con otros medicamentos ejm: renales e hígado",
            "*1/*2": "Tratamiento con dosis inicial recomendada. Considerar programa de valoración más lento o una dosis de mantenimiento más baja que los metabolizadores normales ** Tener cuidado con otros medicamentos ejm: renales e hígado",
            "*1/*3": "Tratamiento con dosis inicial recomendada. Considerar programa de valoración más lento o una dosis de mantenimiento más baja que los metabolizadores normales ** Tener cuidado con otros medicamentos ejm: renales e hígado",
            "*2/*17": "Tratamiento con dosis inicial recomendada. Considerar programa de valoración más lento o una dosis de mantenimiento más baja que los metabolizadores normales ** Tener cuidado con otros medicamentos ejm: renales e hígado",
            "*3/*17": "Tratamiento con dosis inicial recomendada. Considerar programa de valoración más lento o una dosis de mantenimiento más baja que los metabolizadores normales ** Tener cuidado con otros medicamentos ejm: renales e hígado",
            "*2/*9": "Cambio de antidepresivo por uno no metabolizado por CYP2C19. Reducción al 50% de la dosis. ** dosis de citalopram 20mg/day máxima",
            "*3/*9": "Cambio de antidepresivo por uno no metabolizado por CYP2C19. Reducción al 50% de la dosis. ** dosis de citalopram 20mg/day máxima",
            "*2/*2": "Cambio de antidepresivo por uno no metabolizado por CYP2C19. Reducción al 50% de la dosis. ** dosis de citalopram 20mg/day máxima",
            "*3/*3": "Cambio de antidepresivo por uno no metabolizado por CYP2C19. Reducción al 50% de la dosis. ** dosis de citalopram 20mg/day máxima",
            "*2/*3": "Cambio de antidepresivo por uno no metabolizado por CYP2C19. Reducción al 50% de la dosis. ** dosis de citalopram 20mg/day máxima",
            "*1/*12": "No recomendaciones",
            "*2/*12": "No recomendaciones",
            "*12/*14": "No recomendaciones"
        }
        
    }
}

import streamlit as st
# Título y descripción de la app
st.title("Recomendaciones Farmacogenéticas")
st.markdown("""
Esta aplicación proporciona recomendaciones basadas en genes y medicamentos.  
Selecciona las opciones relevantes para obtener información personalizada.
""")

# Paso 1: Ingreso de información personal
st.header("Información Personal")
nombre = st.text_input("Nombre y apellidos")
edad = st.number_input("Edad", min_value=0, step=1)
sexo = st.selectbox("Sexo", options=["Hombre", "Mujer"])
fecha_nacimiento = st.date_input("Fecha de nacimiento")

# Paso 2: Estilo de vida
st.header("Estilo de Vida")
ejercicio = st.radio("¿Realizas ejercicio regularmente?", ["Sí", "No"])
alcohol = st.radio("¿Consumes alcohol regularmente?", ["Sí", "No"])
tabaco = st.radio("¿Fumas o has fumado alguna vez?", ["Sí", "No"])

# Paso 3: Selección de genes y medicamentos
st.header("Selección de Genes y Medicamentos")
gen_seleccionado = st.selectbox("Selecciona un gen", options=list(diccionario_combinado.keys()))

if gen_seleccionado:
    medicamentos = diccionario_combinado[gen_seleccionado].keys()
    medicamento_seleccionado = st.selectbox("Selecciona un medicamento", options=medicamentos)

    if medicamento_seleccionado and medicamento_seleccionado != "Medicamentos":
        alelos = diccionario_combinado[gen_seleccionado][medicamento_seleccionado].keys()
        alelo_seleccionado = st.selectbox("Selecciona un alelo", options=alelos)

        # Mostrar recomendación
        if alelo_seleccionado:
            recomendacion = diccionario_combinado[gen_seleccionado][medicamento_seleccionado][alelo_seleccionado]
            st.subheader("Recomendación")
            st.write(recomendacion)

# Paso 4: Resultados y resumen
st.header("Resumen")
if st.button("Mostrar Resumen"):
    st.write(f"**Nombre:** {nombre}")
    st.write(f"**Edad:** {edad}")
    st.write(f"**Sexo:** {sexo}")
    st.write(f"**Fecha de nacimiento:** {fecha_nacimiento.strftime('%d/%m/%Y')}")
    st.write(f"**Ejercicio regular:** {ejercicio}")
    st.write(f"**Consumo de alcohol:** {alcohol}")
    st.write(f"**Fuma o ha fumado:** {tabaco}")

    if alelo_seleccionado:
        st.write(f"**Gen seleccionado:** {gen_seleccionado}")
        st.write(f"**Medicamento seleccionado:** {medicamento_seleccionado}")
        st.write(f"**Alelo seleccionado:** {alelo_seleccionado}")
        st.write(f"**Recomendación:** {recomendacion}")